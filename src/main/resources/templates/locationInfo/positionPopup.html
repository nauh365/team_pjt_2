<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>위치 검색 허용</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="/css/popup.css" rel="stylesheet">
</head>
<body>
<h1>현재 위치 기준으로 검색하시겠습니까?</h1>
<button onclick="agreeToSearch()">예</button>
<button onclick="window.close()">아니오</button>

<script>
    function agreeToSearch() {
        navigator.geolocation.getCurrentPosition(function(position) {
            if (window.opener && !window.opener.closed) {
                window.opener.sendPositionToServer(position);
            }
            window.close();
        }, function(error) {
            console.error('위치 정보를 가져오는 데 실패했습니다.', error);
            window.close();
        });
    }
</script>
</body>
</html>